# Система управления доступом к ресурсам

## Описание

Данная система реализует гибкую модель управления доступом на основе ролей (RBAC - Role-Based Access Control) с использованием Django REST Framework и JWT аутентификации.

## Основные возможности

###  Управление пользователями

- ✅ Регистрация с полными данными (имя, фамилия, отчество, email, пароль)
- ✅ Вход в систему по email и паролю
- ✅ Выход из системы
- ✅ Обновление профиля пользователя
- ✅ Мягкое удаление аккаунта (is_active=False)
- ✅ JWT аутентификация для последующих запросов

## API Endpoints

### Аутентификация

- `POST /api/v1/auth/users/` - Регистрация пользователя
- `POST /api/v1/jwt/create/` - Получение JWT токена
- `POST /api/v1/jwt/refresh/` - Обновление JWT токена
- `POST /api/v1/jwt/verify/` - Проверка JWT токена

### Пользователи

- `GET /api/users/` - Список пользователей
- `GET /api/users/me/` - Информация о текущем пользователе
- `PATCH /api/users/update_me/` - Обновление профиля
- `DELETE /api/users/delete_me/` - Мягкое удаление аккаунта
- `POST /api/users/{id}/assign_role/` - Назначение роли пользователю
- `DELETE /api/users/{id}/remove_role/` - Удаление роли у пользователя

### Посты (пример ресурса)

- `GET /api/posts/` - Список постов
- `POST /api/posts/` - Создание поста
- `GET /api/posts/{id}/` - Детали поста
- `PUT/PATCH /api/posts/{id}/` - Обновление поста
- `DELETE /api/posts/{id}/` - Удаление поста

### Управление системой (только для администраторов)

- `GET /api/resources/` - Список ресурсов
- `GET /api/actions/` - Список действий
- `GET /api/roles/` - Список ролей
- `GET /api/permissions/` - Список разрешений
- `GET /api/user-roles/` - Список ролей пользователей

## Тестовые пользователи


| Email                 | Пароль      | Роль      | Описание              |
| --------------------- | ----------- | --------- | --------------------- |
| admin@example.com     | password123 | admin     | Администратор системы |
| moderator@example.com | password123 | moderator | Модератор контента    |
| author@example.com    | password123 | author    | Автор контента        |
| reader@example.com    | password123 | reader    | Читатель              |


### Роли и их возможности

#### Admin (Администратор)

- Полный доступ ко всем ресурсам и действиям
- Управление пользователями, ролями, разрешениями

#### Moderator (Модератор)

- Чтение и создание постов
- Одобрение/отклонение постов
- Управление комментариями
- Просмотр пользователей

#### Author (Автор)

- Чтение и создание постов
- Редактирование своих постов
- Создание и редактирование комментариев

#### Reader (Читатель)

- Только чтение постов и комментариев

### Обработка ошибок

- **401 Unauthorized**: Пользователь не аутентифицирован или неактивен
- **403 Forbidden**: Пользователь аутентифицирован, но не имеет необходимых разрешений

## Структура базы данных

Подробное описание схемы базы данных находится в файле [DATABASE_SCHEMA.md](DATABASE_SCHEMA.md).


- JWT токены имеют ограниченное время жизни
- Пароли хешируются с использованием встроенных механизмов Django
- Все API endpoints защищены аутентификацией
- Система разрешений проверяет доступ на каждом запросе
